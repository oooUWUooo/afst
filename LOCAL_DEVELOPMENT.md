# Локальная разработка и тестирование

Этот документ описывает, как запустить полное приложение (frontend + backend) локально для тестирования функциональности.

## Быстрый старт

### Шаг 1: Установка зависимостей

Для запуска backend:

```bash
pip install fastapi uvicorn python-multipart
```

### Шаг 2: Запуск backend сервера

```bash
uvicorn example_backend:app --reload
```

Сервер запустится на `http://localhost:8000`

### Шаг 3: Запуск frontend сервера

В новом терминале:

```bash
python start_server.py
```

Сервер запустится на `http://localhost:8080`

### Шаг 4: Настройка API URL

1. Откройте `http://localhost:8080` в браузере
2. Найдите раздел "API Configuration"
3. Введите URL: `http://localhost:8000`
4. Нажмите "Save URL"
5. Перезагрузите страницу

Теперь вы можете регистрироваться и использовать все функции приложения.

## Подробная настройка

### Запуск с помощью npm (если установлен)

```bash
npm install  # Установка зависимостей (опционально)
npm start    # Запуск frontend сервера
```

### Запуск backend с указанием хоста и порта

```bash
uvicorn example_backend:app --host 0.0.0.0 --port 8000 --reload
```

### Использование виртуального окружения

```bash
# Создание виртуального окружения
python -m venv venv

# Активация (Linux/Mac)
source venv/bin/activate

# Активация (Windows)
venv\Scripts\activate

# Установка зависимостей
pip install fastapi uvicorn python-multipart

# Запуск backend
uvicorn example_backend:app --reload
```

## Проверка работоспособности

После запуска обоих серверов:

1. Backend API доступен по адресу: `http://localhost:8000`
2. Документация API: `http://localhost:8000/docs`
3. Frontend доступен по адресу: `http://localhost:8080`

## Устранение неполадок

### CORS ошибки

Если возникают проблемы с CORS, убедитесь, что backend запущен до того, как вы пытаетесь использовать API из frontend.

### Ошибки подключения

Если frontend не может подключиться к backend:
1. Проверьте, что оба сервера запущены
2. Проверьте, что API URL в frontend правильно настроен
3. Убедитесь, что порты не заняты другими процессами

### Проверка соединения

Вы можете проверить соединение между frontend и backend вручную:

```bash
curl -X POST http://localhost:8000/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"password"}'
```

## Тестирование функций

После настройки вы можете протестировать:

1. **Регистрация и аутентификация** - создание аккаунта и вход
2. **Управление книгами** - добавление, просмотр, поиск книг
3. **Управление читателями** - добавление и просмотр читателей
4. **Система выдачи** - выдача и возврат книг
5. **Статистика** - отображение статистики библиотеки

## Завершение работы

Для остановки серверов:
1. Нажмите `Ctrl+C` в терминале с каждым из запущенных серверов
2. Деактивируйте виртуальное окружение (если использовали): `deactivate`

## Заметки по разработке

- Backend использует временное хранилище в памяти, все данные будут потеряны при перезапуске
- Для разработки рекомендуется использовать флаг `--reload` для автоматической перезагрузки при изменении кода
- Frontend хранит токен аутентификации в localStorage браузера